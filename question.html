<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Our Love Story ğŸ’–</title>
<link rel="stylesheet" href="/static/style.css">
</head>

<body>

<!-- MUSIC -->
<audio id="bgm" loop preload="auto">
  <source src="/static/music/love.mp3" type="audio/mpeg">
</audio>

<div id="startScreen">
  ğŸ’– Tap to start our love story ğŸ’–
  <button onclick="startLove()">Start ğŸ’•</button>
</div>

<canvas id="fire"></canvas>

<div class="card">
<div class="slideshow">
<img id="slide" src="/static/images/img1.jpg">
</div>

<div id="box"></div>
</div>

<script>
/* MUSIC FIX */
const music=document.getElementById("bgm");
function startMusic(){
music.play().catch(()=>{});
document.removeEventListener("click",startMusic);
document.removeEventListener("touchstart",startMusic);
}
document.addEventListener("click",startMusic);
document.addEventListener("touchstart",startMusic);

/* SLIDESHOW */
let photo=1;
setInterval(()=>{
photo++;
if(photo>34) photo=1;
document.getElementById("slide").src="/static/images/img"+photo+".jpg";
},3000);

/* FIREWORKS */
const canvas=document.getElementById("fire");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
let particles=[];

function fireworks(){
for(let i=0;i<200;i++){
particles.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height/2,
vx:(Math.random()-0.5)*14,
vy:(Math.random()-0.5)*14,
life:120
});
}
}

function animate(){
ctx.fillStyle="rgba(0,0,0,.25)";
ctx.fillRect(0,0,canvas.width,canvas.height);

particles.forEach((p,i)=>{
ctx.fillStyle=`hsl(${Math.random()*360},100%,60%)`;
ctx.beginPath();
ctx.arc(p.x,p.y,3.5,0,Math.PI*2);
ctx.fill();
p.x+=p.vx;
p.y+=p.vy;
p.life--;
if(p.life<=0) particles.splice(i,1);
});
requestAnimationFrame(animate);
}
animate();

/* QUESTIONS */
const questions=[
{q:"ğŸ’– Who is your forever person?",a:["SUHANA ","CHINNI ğŸ˜˜"]},
{q:"ğŸ’• Who loves ASHU more?",a:["ANANYA ğŸ’•","ANUSHA ğŸ’—"]},
{q:"ğŸ’ Will you stay with me forever?",a:["YES ğŸ’","ALWAYS â™¾ï¸"]},
{q:"ğŸ˜ Are you mine even after marriage?",a:["FOREVER ğŸ˜","No ğŸ¥±"]},
{q:"â¤ï¸ Do you love me?",a:["No ğŸ¥±","INFINITE â™¾ï¸"]},
{q:"ğŸ’– Will you be my Valentine every year?",a:["No ğŸ¥±","FOREVER ğŸ’•"]}
];

let i=0;

function show(){
let html=`<h2>${questions[i].q}</h2>`;
questions[i].a.forEach(btn=>{
html+=`<button onclick="answer()">${btn}</button>`;
});
html+=`<br><button class="next" id="nextBtn" onclick="next()">Next â¡ï¸</button>`;
box.innerHTML=html;
}

function answer(){
fireworks();
document.getElementById("nextBtn").style.display="inline-block";
}

function next(){
i++;
if(i<questions.length){
show();
}else{
box.innerHTML=`<h1>ğŸ† I LOVE YOU FOREVER ğŸ’–</h1>
<p>You are my world ğŸŒâ¤ï¸</p>`;
setInterval(fireworks,900);
}
}

show();
</script>
<script>
const music = document.getElementById("bgm");

document.body.addEventListener("click", () => {
    if (music.paused) {
        music.play().catch(e => console.log(e));
    }
}, { once: true });
</script>

</body>
</html>
